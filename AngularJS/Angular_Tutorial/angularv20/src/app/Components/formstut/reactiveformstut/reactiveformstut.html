<div class="min-h-screen flex items-center justify-center bg-gray-50 p-6">
  <div class="w-full max-w-2xl bg-white rounded-2xl shadow p-6">
    <h1 class="text-xl font-semibold mb-1">Profile</h1>
    <p class="text-sm text-gray-500 mb-6">Edit your username and name details.</p>

    <!-- Username block -->
    <div class="mb-6">
      <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>

      <div class="flex gap-3">
        <input
          id="username"
          type="text"
          [formControl]="username"
          class="flex-1 p-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-200"
          placeholder="your-username"
        />

        <button
          type="button"
          (click)="updateUsername()"
          class="px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-700 focus:ring-2 focus:ring-teal-200"
        >
          Update
        </button>
      </div>

      <p class="mt-2 text-xs text-gray-500">
        Current: <span class="font-medium">{{ username.value || 'â€”' }}</span>
      </p>
    </div>

    <hr class="border-gray-100 my-4" />

    <!-- Profile form -->
    <form [formGroup]="profileform" (ngSubmit)="onsubmit()" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label for="first-name" class="block text-sm font-medium text-gray-700 mb-2">
            First name
          </label>
          <input
            id="first-name"
            type="text"
            formControlName="firstname"
            class="w-full p-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-100"
            placeholder="First"
          />
        </div>

        <div>
          <label for="last-name" class="block text-sm font-medium text-gray-700 mb-2">
            Last name
          </label>
          <input
            id="last-name"
            type="text"
            formControlName="lastname"
            class="w-full p-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-100"
            placeholder="Last"
          />
        </div>
      </div>

      <div class="flex justify-end items-center gap-3">
        <button
          type="button"
          class="px-4 py-2 rounded-lg border bg-white text-gray-700 hover:bg-gray-50"
          (click)="profileform.reset(); username.reset()"
        >
          Reset
        </button>

        <button
          type="button"
          class="px-4 py-2 rounded-lg border bg-amber-400 text-black hover:bg-amber-500"
          (click)="patchValue()"
        >
          Patch Value
        </button>

        <button
          type="submit"
          class="px-5 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700"
        >
          Save
        </button>
      </div>
    </form>

    <!-- formbuilder group -->
    <form
      [formGroup]="address"
      (submit)="onSubmit()"
      class="max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-md space-y-5"
    >
      <h2 class="text-xl font-semibold text-gray-800 text-center">Address Form</h2>

      <!-- Address Line 1 -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"> Address Line 1 </label>
        <input
          type="text"
          formControlName="addressline1"
          placeholder="Enter address line 1"
          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <!-- Validtation handling -->
        @if (address.get("addressline1")?.touched && address.get("addressline1")?.invalid) {
        <p class="text-red-500 text-xs mt-1">Address Line 1 is required</p>
        }
      </div>

      <!-- Address Line 2 -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"> Address Line 2 </label>
        <input
          type="text"
          formControlName="addressline2"
          placeholder="Enter address line 2"
          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Pincode -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"> Pincode </label>
        <input
          type="text"
          formControlName="pincode"
          placeholder="Enter pincode"
          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Nested FormGroup -->
      <div formGroupName="details">
        <label class="block text-sm font-medium text-gray-700 mb-1"> State </label>
        <input
          type="text"
          formControlName="state"
          placeholder="Enter state"
          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- for array control -->
      <div formArrayName="tags">
        <h3 class="text-xl font-bold">Tags</h3>
        <button class="bg-green-300 p-2" (click)="addNewTag()">Add New Tag</button>
        @for (item of this.tagsinputs.controls; track $index;let i=$index) {
        <div>
          <!-- The repeated tag template -->
          <label for="alias-{{ i }}">TAG:</label>
          <input
            class="border-2 border-blue-600 p-2"
            id="alias-{{ i }}"
            type="text"
            [formControlName]="i"
          />
        </div>
        }
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="address.invalid"
        class="w-full py-2 text-white font-medium rounded-lg transition bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed"
      >
        Submit
      </button>
    </form>
  </div>
</div>
